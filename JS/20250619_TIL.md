# ğŸ“š JavaScript - Promise, Fetch API, Async/Await ì •ë¦¬

---

## âœ… 1. Promise ê¸°ë³¸ ê°œë…

### ğŸ”¹ ì •ì˜

ë¹„ë™ê¸° ì‘ì—…ì˜ ì„±ê³µ ë˜ëŠ” ì‹¤íŒ¨ë¥¼ í‘œí˜„í•˜ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´

### ğŸ”¹ ì£¼ìš” ë¬¸ë²• ë° ì„¤ëª…

#### ğŸ“Œ new Promise

| ë¬¸ë²•                                        | ì„¤ëª…                                               |
| ----------------------------------------- | ------------------------------------------------ |
| `new Promise((resolve, reject) => {...})` | ë¹„ë™ê¸° ì‘ì—…ì„ ì²˜ë¦¬í•˜ëŠ” ê°ì²´ ìƒì„±. ì„±ê³µì€ resolve, ì‹¤íŒ¨ëŠ” rejectë¡œ êµ¬ë¶„í•¨ |

#### ğŸ“Œ then()

| ë¬¸ë²•                              | ì„¤ëª…                                   |
| ------------------------------- | ------------------------------------ |
| `promise.then(result => {...})` | Promiseê°€ ì„±ê³µ(resolve)í–ˆì„ ë•Œ ê²°ê³¼ ê°’ì„ ë°›ì•„ ì²˜ë¦¬ |

#### ğŸ“Œ catch()

| ë¬¸ë²•                              | ì„¤ëª…                                |
| ------------------------------- | --------------------------------- |
| `promise.catch(error => {...})` | Promiseê°€ ì‹¤íŒ¨(reject)í–ˆì„ ë•Œ ì—ëŸ¬ë¥¼ ë°›ì•„ ì²˜ë¦¬ |

#### ğŸ“Œ finally()

| ë¬¸ë²•                             | ì„¤ëª…                                  |
| ------------------------------ | ----------------------------------- |
| `promise.finally(() => {...})` | ì„±ê³µì´ë“  ì‹¤íŒ¨ë“  í•­ìƒ ì‹¤í–‰ë¨ (cleanup ìš©ë„ ë“±ìœ¼ë¡œ ì‚¬ìš©) |

### ğŸ”¹ ì˜ˆì‹œ ì½”ë“œ (3ë‹¨ê³„ ì²´ì´ë‹)

```js
function executor(resolve, reject) {
    const flag = true;
    if (flag) {
        resolve('ì•¼í˜¸ ì‹ ë‚œë‹¤ ! ê¹€ì¹˜ì°Œê°œ ëƒ ëƒ ');
    } else {
        reject('ì‹¤íŒ¨ ! ì£¼ë°©ì— ë¶ˆì´ ë‚¬ì–´ìš” !');
    }
}

const myPromise1 = new Promise(executor);

const myPromise2 = myPromise1.then((x) => {
    const result = x + ' ê³„ì‚°ì€ ì–´ë””ì„œ í•˜ì£  ??';
    return new Promise((resolve, reject) => {
        resolve(result);
    });
});

const myPromise3 = myPromise2.then((message) => {
    console.log(message);
});
```

---

## âœ… 2. XMLHttpRequest + Promise (ì½œë°± ì§€ì˜¥ í•´ê²°)

```js
function fetchGet(url) {
    return new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest();
        xhr.open('GET', url);
        xhr.send();

        xhr.addEventListener('load', e => {
            const responseData = JSON.parse(xhr.responseText);
            resolve(responseData);
        });

        xhr.addEventListener('error', e => {
            reject('ì„œë²„ í†µì‹  ì¤‘ ì—ëŸ¬ ë°œìƒ!');
        });
    });
}

$fetchBtn.addEventListener('click', e => {
    fetchGet(`${serverUrl}/users`)
        .then((userList) => fetchGet(`${serverUrl}/posts?userId=${userList[1].id}`))
        .then((postList) => fetchGet(`${serverUrl}/comments?postId=${postList[3].id}`))
        .then((commentList) => {
            commentList.forEach(comment => {
                const $div = document.createElement('div');
                $div.textContent = comment.name;
                document.body.append($div);
            });
        });
});
```

---

## âœ… 3. Fetch API ê¸°ë³¸

### ğŸ”¹ ì •ì˜

`fetch()`ëŠ” HTTP ìš”ì²­ì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë³´ë‚´ê³  ì‘ë‹µì„ ë°›ëŠ” í•¨ìˆ˜ì´ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ GET ìš”ì²­ì´ë©°, `Promise`ë¥¼ ë°˜í™˜í•œë‹¤.

### ğŸ”¹ ë¬¸ë²• ì •ë¦¬

| ë¬¸ë²•           | ì„¤ëª…                                |
| ------------ | --------------------------------- |
| `fetch(url)` | ì£¼ì–´ì§„ URLì— GET ìš”ì²­ì„ ë³´ëƒ„. Promiseë¥¼ ë°˜í™˜í•¨ |

```js
fetch('https://jsonplaceholder.typicode.com/posts')
    .then(res => res.json())
    .then(posts => {
        displayPosts(posts.slice(0, 5));
    })
    .catch(error => {
        postsContainer.innerHTML = `<p style="color: red;">${error}</p>`;
    })
    .finally(() => {
        console.log("ë°ì´í„° ìš”ì²­ ì™„ë£Œ");
    });
```

---

## âœ… 4. Async / Await ë¬¸ë²•

### ğŸ”¹ ì •ì˜

`async/await`ì€ ë¹„ë™ê¸° ì½”ë“œë¥¼ ë™ê¸° ì½”ë“œì²˜ëŸ¼ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ë¬¸ë²•ì´ë‹¤.

### ğŸ”¹ íŠ¹ì§•

* `async` í•¨ìˆ˜ ì•ˆì—ì„œë§Œ `await` ì‚¬ìš© ê°€ëŠ¥
* `await`ì€ Promiseê°€ ì²˜ë¦¬ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼
* `try/catch` ë¬¸ìœ¼ë¡œ ì˜ˆì™¸ ì²˜ë¦¬ ê°€ëŠ¥

### ğŸ”¹ ì£¼ìš” ë¬¸ë²• ì •ë¦¬

#### ğŸ“Œ async/await

| ë¬¸ë²•                        | ì„¤ëª…                          |
| ------------------------- | --------------------------- |
| `async function í•¨ìˆ˜ëª…() {}` | í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ await ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ í•¨     |
| `await promise`           | promiseê°€ ì²˜ë¦¬ë  ë•Œê¹Œì§€ ëŒ€ê¸°í•˜ê³  ê²°ê³¼ ë°˜í™˜ |

### ğŸ”¹ ê¸°ë³¸ ì˜ˆì‹œ

```js
const $btn = document.getElementById('btn');
const url = `https://jsonplaceholder.typicode.com/users`;

async function fetchGetAsync() {
    try {
        const res = await fetch(url);            // ì‘ë‹µì„ ê¸°ë‹¤ë¦¼
        const userList = await res.json();       // JSON ë³€í™˜ì„ ê¸°ë‹¤ë¦¼
        console.log(userList);                   // ê²°ê³¼ ì¶œë ¥
    } catch (e) {
        console.error('ì—ëŸ¬ ë°œìƒ:', e);
    }
}

$btn.addEventListener('click', e => {
    fetchGetAsync();
});
```

---

## âœ… 5. ì‹¤ì „ ì˜ˆì œ: ê²Œì‹œë¬¼ ë¦¬ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° (Async ë²„ì „)

```js
function displayPosts(posts) {
    const postsContainer = document.getElementById("posts");
    postsContainer.innerHTML = "";

    posts.forEach(post => {
        const postElement = document.createElement("div");
        postElement.classList.add("post");

        postElement.innerHTML = `
            <div class="post-title">${post.title}</div>
            <div class="post-body">${post.body}</div>
        `;

        postsContainer.append(postElement);
    });
}

async function fetchPosts() {
    const postsContainer = document.getElementById("posts");
    postsContainer.innerHTML = "<p>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</p>";

    try {
        const res = await fetch("https://jsonplaceholder.typicode.com/posts");
        const posts = await res.json();
        displayPosts(posts.slice(0, 5));
    } catch (error) {
        postsContainer.innerHTML = `<p style=\"color: red;\">${error}</p>`;
    } finally {
        console.log("ë°ì´í„° ìš”ì²­ ì™„ë£Œ");
    }
}

document.getElementById("fetchPosts").addEventListener("click", () => {
    fetchPosts();
});
```

---

## âœ… ê²°ë¡ : ê²°êµ­ì—” async/awaitì´ ê°€ì¥ ê¹”ë”í•˜ê³  í¸í•˜ë‹¤

* **Promiseì™€ then/catch**ë¥¼ ì‚¬ìš©í•˜ë©´ ì½œë°±ì§€ì˜¥ì€ í”¼í•  ìˆ˜ ìˆì§€ë§Œ ì²´ì´ë‹ì´ ê¸¸ì–´ì§€ë©´ ì—¬ì „íˆ ê°€ë…ì„±ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆë‹¤.
* **fetch API**ëŠ” ê¹”ë”í•˜ì§€ë§Œ `.then().catch()`ê°€ ê³„ì† ì¤‘ì²©ë˜ë©´ ë³µì¡í•´ì§
* **async/await**ì€ try-catchë¡œ ì˜ˆì™¸ë¥¼ ëª…í™•í•˜ê²Œ ì²˜ë¦¬í•˜ê³ , ë§ˆì¹˜ ë™ê¸°ì‹ ì½”ë“œì²˜ëŸ¼ ìˆœì„œëŒ€ë¡œ ì‘ì„± ê°€ëŠ¥í•´ì„œ ê°€ë…ì„±ì´ ë†’ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰½ë‹¤.

> âœ… ì•ìœ¼ë¡œëŠ” ë³µì¡í•œ ë¹„ë™ê¸° ë¡œì§ì¼ìˆ˜ë¡ `async/await`ì„ ìš°ì„  ê³ ë ¤

---

