# EC2에 웹서버 구축하기

## EC2 원격 접속 방법

### Secure Shell Protocol(SSH)를 사용한 연결

- SSH 프로토콜을 이용해 Linux 인스턴스에 원격으로 연결
- SSH(Secure Shell Protocol)은 보안을 통해 원격으로 접속하기 위한 방식
- 아이디, 패스워드 방식이 아닌 Public Key와 Private Key를 이용해 접속
- 원격 접속 방법: MAC PC의 Terminal, Windows Powershell, Windows Putty 프로그램 등을 사용

### 원격 데스크톱 프로토콜(RDP)를 사용한 연결

- RDP 프로토콜을 이용해 Windows 인스턴스에 원격으로 연결
- RDP(Remote Desktop Protocol)은 Windows OS를 원격으로 접속하기 위한 방식
- 아이디, 패스워드를 이용해 접속
- 원격 접속 방법: 윈도우의 원격 데스크톱 연결 프로그램 사용

### EC2 Instance Connect를 사용한 연결

- EC2 Instance Connect를 사용하여 Linux 인스턴스에 연결

### AWS Systems Manager 세션 관리자(Session Manager)를 사용한 연결

- AWS System Manager 기능을 사용하여 Linux, Windows 인스턴스에 연결

## EC2 Instance Connect를 통한 연결

- AWS 콘솔에서 EC2의 인스턴스 탭을 클릭한 후 실행 중인 EC2를 선택하고 우측 상단에 연결을 클릭합니다.

<img width="1213" height="333" alt="image" src="https://github.com/user-attachments/assets/533f2593-dc7c-4196-b422-6eb30333e0e6" />


- 그리고 우측 하단의 연결 버튼 클릭

<img width="861" height="604" alt="image" src="https://github.com/user-attachments/assets/f46b608f-179d-4f43-876b-4e1599bfb5f7" />


- 끝!

<img width="829" height="451" alt="image" src="https://github.com/user-attachments/assets/65004dbc-e040-42d0-951e-2c179cd0a3c1" />


## 윈도우에서 putty를 통해 EC2에 연결하기

[putty 다운로드 링크](https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html)

<img width="756" height="430" alt="image" src="https://github.com/user-attachments/assets/4552f7e0-f447-4de6-b5c9-701fc611fed9" />


- putty를 설치한 후 실행합니다.
- 그리고 ec2의 퍼블릭 IP 주소를 확인합니다.

<img width="1304" height="301" alt="image" src="https://github.com/user-attachments/assets/67a6a04e-f67b-495b-8af5-e17e15b28fa1" />


- putty의 host name에 `ec2-user@퍼블릭아이피주소 `  를 적습니다.

<img width="452" height="440" alt="image" src="https://github.com/user-attachments/assets/61548055-185d-48bf-ba70-a7eaa4720ac4" />


- 좌측 탭에 Connection → SSH → Auth → Credentials 탭을 누른 후
- Private key file for authentication에 Browse버튼을 누른 후
- EC2 생성 시 만든 key pair 파일인  xxx.ppk 파일을 선택합니다.

<img width="451" height="441" alt="image" src="https://github.com/user-attachments/assets/397a3b35-664c-4571-a94b-960ad76bc155" />


- 다시 좌측 탭에 Session탭을 클릭 후
- Saved Sessions에 식별이름을 입력한 후 Save를 누른 뒤
- Open 버튼을 눌러줍니다.

<img width="450" height="439" alt="image" src="https://github.com/user-attachments/assets/4f40487f-90b1-4982-867b-561e61d2fd30" />


- 경고창이 뜨면 Accpet를 누릅니다.

<img width="818" height="559" alt="image" src="https://github.com/user-attachments/assets/11b46310-dccd-41d2-a85f-843e7920bc0a" />


- 접속 성공!!

<img width="1045" height="669" alt="image" src="https://github.com/user-attachments/assets/47dbe366-39e5-4594-aed2-07f39543a8c0" />


## Mac OS 에서 연결하기

Amazon EC2 인스턴스에 SSH 연결을 설정하는 것은 꽤 간단합니다. 아래에 몇 가지 단계를 제공해 드리겠습니다:

1. **터미널 열기**: Mac에서 터미널을 열고 작업하려는 디렉토리로 이동합니다.
2. **키 퍼미션 변경**: 가장 먼저 할 일은 PEM 키의 퍼미션을 변경하는 것입니다. 퍼미션이 너무 넓게 설정되어 있으면, SSH는 보안 위험으로 판단하고 거부할 수 있습니다. 이 작업을 수행하려면, 터미널에서 다음 명령어를 입력합니다:
    
    ```
    chmod 400 /path/my-key-pair.pem
    
    ```
    
    이 명령어는 PEM 키가 있는 경로를 대체해야 합니다.
    
3. **SSH 연결 설정**: 키 퍼미션을 변경한 후, 인스턴스에 SSH 연결을 설정할 수 있습니다. 아래는 일반적인 명령어 형식입니다:
    
    ```
    ssh -i /path/my-key-pair.pem ec2-user@ec2-198-51-100-1.compute-1.amazonaws.com
    
    ```
    
    이 명령어는 또한 변경해야 합니다:
    
    - `/path/my-key-pair.pem`은 실제 PEM 키 파일의 경로로 대체해야 합니다.
    - `ec2-user@ec2-198-51-100-1.compute-1.amazonaws.com`은 실제 EC2 인스턴스의 공용 DNS로 대체해야 합니다. `ec2-user`는 일반적으로 Amazon Linux AMI를 사용하는 인스턴스에서 사용되는 사용자 이름입니다. 다른 AMI를 사용하는 경우 다른 사용자 이름이 필요할 수 있습니다.
4. **연결 확인**: 마지막으로, "The authenticity of host '[ec2-198-51-100-1.compute-1.amazonaws.com](http://ec2-198-51-100-1.compute-1.amazonaws.com/) (10.254.142.33)' can't be established. Are you sure you want to continue connecting (yes/no)?"와 같은 메시지가 표시되면 "yes"를 입력하고 Enter 키를 눌러 연결을 확인합니다.

그리고 나서 EC2 인스턴스에 SSH로 연결되어야 합니다. 연결에 문제가 생기면, 보안 그룹 설정을 확인하고 해당 인스턴스에 SSH 트래픽(포트 22)이 허용되어 있는지 확인해 보세요.

## EC2 Linux 인스턴스 웹서버 생성 실습

- 위 2가지 방법 중 하나로 EC2에 연결한 후 아래의 명령어를 적어주세요.

```bash
$ sudo su  // 관리자 권한 변경
# yum update -y // 인스톨러 업데이트 -y옵션은 모두 yes
# yum install httpd -y // httpd라는 웹서버 설치
# service httpd start
# chkconfig httpd on
# cd /var/www/html
```

- EC2 세부 정보에서 퍼블릭 IP와 퍼블릭 도메인 네임을 확인합니다.

<img width="1101" height="269" alt="image" src="https://github.com/user-attachments/assets/33c54bb2-5a1d-4f48-8127-bd233ba05cc0" />


- 둘 중 하나를 브라우저 주소창에 입력하여 웹 서버 구동을 확인합니다.

<img width="1841" height="560" alt="image" src="https://github.com/user-attachments/assets/9590a094-fb75-45e0-89f0-e3a2d758fe57" />


- 확인되었다면 웹서버가 잘 구동된 것입니다.
- 다음은 터미널에 `$ vi index.html` 을 입력한 뒤
- I 키를 눌러 입력모드로 전환 후 간단한 html 파일을 작성해봅니다.

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>my ec2 instance</title>
</head>
<body>
    <h1>얌냠냠 옴뇽뇽~~</h1>
</body>
</html>
```

- 작성 후 ESC 키를 눌러 입력모드를 빠져 나온 뒤 ‘ :wq ’ 를 입력해 저장 후 종료를 해줍니다.

<img width="787" height="742" alt="image" src="https://github.com/user-attachments/assets/d367cc3e-a3b2-4414-9fec-5da845a3225c" />

- 그리고 다시 브라우저에서 ec2 퍼블릭 도메인을 입력해봅니다.

<img width="663" height="301" alt="image" src="https://github.com/user-attachments/assets/bec8feb4-3d1a-437a-a2d2-91a9be6f43a5" />


- 적용 완료!
