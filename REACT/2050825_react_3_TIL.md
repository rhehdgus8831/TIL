# React 학습 노트: State와 useState Hook

## 1\. React의 상태(State)란?

React에서 \*\*상태(State)\*\*란 컴포넌트가 내부적으로 가지는 \*\*"데이터 저장 공간"\*\*입니다. 이 데이터는 사용자의 입력, API 응답, 시간의 흐름 등 다양한 요인에 의해 변경될 수 있으며, State가 변경되면 React는 **자동으로 UI를 다시 그려줍니다(Re-rendering)**.

State는 사용자와 상호작용하며 동적으로 변화하는 UI를 만들기 위해 필수적입니다. 예를 들어, 사용자가 입력하는 폼의 내용, 버튼 클릭 횟수, 다크/라이트 모드 전환 여부 등이 모두 State로 관리될 수 있습니다.

### 1.1. 상태의 불변성 (Immutability)

React에서 State를 다룰 때 **불변성**을 지키는 것은 매우 중요합니다. 이는 \*\*"원본 State를 직접 수정하지 않고, 항상 새로운 State 값으로 교체해야 한다"\*\*는 규칙입니다.

- **Why?** React는 State가 변경되었는지 감지하기 위해 이전 State와 새로운 State를 **비교**합니다. 만약 원본을 직접 수정하면 React는 변화를 감지하지 못해 UI를 업데이트하지 않을 수 있습니다.
- **How?** 항상 State를 변경할 때는 `useState`가 제공하는 **Setter 함수**를 사용해야 합니다.

-----

## 2\. `useState` Hook 사용하기

`useState`는 함수형 컴포넌트에서 State를 사용할 수 있게 해주는 React의 핵심적인 \*\*Hook(훅)\*\*입니다.

### 2.1. `useState` 기본 문법

`useState`를 사용하려면 먼저 `react`에서 import 해야 합니다.

```jsx
import React, { useState } from 'react';

function MyComponent() {
    // useState(초기값)은 [상태 변수, Setter 함수] 형태의 배열을 반환합니다.
    const [myState, setMyState] = useState(initialState);
}
```

- **`myState` (상태 변수)**: 현재 상태 값을 저장하는 변수입니다.
- **`setMyState` (Setter 함수)**: `myState` 값을 변경할 때 사용하는 전용 함수입니다. **이 함수를 통해서만 상태를 변경해야 합니다.**
- **`initialState` (초기값)**: 컴포넌트가 처음 렌더링될 때 `myState`가 가질 초기값입니다. 숫자, 문자열, 배열, 객체, boolean 등 모든 데이터 타입이 가능합니다.

### 2.2. 왜 Setter 함수를 사용해야 하는가?

Setter 함수를 호출하는 것은 단순히 변수 값을 바꾸는 것 이상의 의미를 가집니다.

1.  **상태 변경 예약**: React에게 "이 컴포넌트의 상태가 변경될 예정이니, 준비해달라"고 요청합니다.
2.  **리렌더링 트리거**: React는 상태 변경이 완료되면, 해당 컴포넌트와 그 자식 컴포넌트들을 다시 렌더링하여 UI를 최신 상태로 업데이트합니다.

만약 `myState = newValue;` 와 같이 상태를 직접 변경하면, React는 이 변화를 전혀 알 수 없어 UI는 아무런 변화 없이 그대로 있게 됩니다.

-----

## 3\. 프로젝트 코드 속 `useState` 활용 사례

### 3.1. 숫자 상태 관리: `Counter.jsx`

가장 기본적인 `useState` 사용 예시입니다. 버튼 클릭에 따라 숫자를 증가시키거나 감소시킵니다.

**`src/components/Counter.jsx`**

```jsx
import React, { useState } from 'react';

const Counter = () => {
    // 'count'라는 이름의 state를 선언하고, 초기값으로 10을 설정합니다.
    const [count, setCount] = useState(10);

    // 이벤트 핸들러: setCount를 호출하여 'count' state를 업데이트합니다.
    const increaseHandler = () => setCount(count + 1); // 이전 값 + 1
    const decreaseHandler = () => setCount(count - 1); // 이전 값 - 1

    return (
        <div>
            {/* state인 'count' 값을 화면에 표시 */}
            <h1>숫자: {count}</h1>
            <button onClick={increaseHandler}>증가</button>
            <button onClick={decreaseHandler}>감소</button>
        </div>
    );
};

export default Counter;
```

### 3.2. 여러 입력 폼 관리: `ExpenseForm.jsx`

하나의 컴포넌트에서 여러 개의 `useState`를 사용하여 각기 다른 입력 필드의 상태를 독립적으로 관리할 수 있습니다.

**`src/components/new-expense/ExpenseForm.jsx`**

```jsx
import React, { useState } from 'react';

const ExpenseForm = () => {
    // 각 입력 필드에 대한 state를 개별적으로 선언
    const [title, setTitle] = useState('');
    const [price, setPrice] = useState(0);
    const [date, setDate] = useState(null);

    const handleSubmit = e => {
        e.preventDefault();
        // 제출 시점에 각 state에 저장된 값들을 하나의 객체로 만듭니다.
        const payload = { title, price, date };
        console.log(payload);
    };

    return (
        <form onSubmit={handleSubmit}>
            <div className="new-expense__control">
                <label>Title</label>
                {/* 입력이 발생할 때마다 setTitle을 호출하여 title state를 업데이트 */}
                <input type="text" onInput={e => setTitle(e.target.value)} />
            </div>
            <div className="new-expense__control">
                <label>Price</label>
                {/* +e.target.value: 입력된 문자열 값을 숫자로 변환하여 저장 */}
                <input type="number" onInput={e => setPrice(+e.target.value)} />
            </div>
            {/* ... */}
        </form>
    );
};
export default ExpenseForm;
```

### 3.3. Boolean 상태 관리 (동적 스타일링): `CheckBoxStyle.jsx`

`true` 또는 `false` 값을 갖는 boolean 타입의 state는 UI의 ON/OFF 상태(토글)나 조건부 렌더링, 동적 스타일링에 매우 유용합니다.

**`src/components/practice/CheckBoxStyle.jsx`**

```jsx
import React, { useState } from 'react';
import './CheckBoxStyle.css';

const CheckBoxStyle = () => {
    // 체크박스의 체크 여부를 boolean 값으로 관리. 초기값은 false(체크 안됨)
    const [checked, setChecked] = useState(false);

    // 체크박스 상태가 변경될 때마다 호출되는 핸들러
    const checkHandler = (e) => {
        // 이벤트 객체의 e.target.checked는 현재 체크박스의 boolean 상태를 담고 있음
        setChecked(e.target.checked);
    }

    return (
        <div className='checkbox-container'>
            <input
                type='checkbox'
                onChange={checkHandler}
                checked={checked} // input의 checked 속성과 state를 동기화
            />
            {/* 삼항 연산자를 사용: 'checked' state가 true이면 'checked' 클래스를, 아니면 'unchecked' 클래스를 적용 */}
            <label className={checked ? `checked` : 'unchecked'} htmlFor='styled-checkbox'>
                Check me!
            </label>
        </div>
    );
};

export default CheckBoxStyle;
```