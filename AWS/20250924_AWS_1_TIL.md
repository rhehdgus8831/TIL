# AWS IAM (Identity and Access Management)

---

## 1. IAM 개요

**IAM(Identity and Access Management)**은 AWS 계정의 서비스와 리소스에 대한 액세스를 안전하게 제어하고 관리하기 위한 웹 서비스입니다. IAM을 사용하여 AWS 사용자, 그룹, 역할 및 그들의 권한을 중앙에서 관리할 수 있습니다.

- **주요 구성 요소**: **사용자(User)**, **그룹(Group)**, **역할(Role)**, **정책(Policy)**으로 구성됩니다.
- **서비스 범위**: 특정 리전(Region)에 종속되지 않는 **글로벌(Global) 서비스**입니다.

### 1.1. IAM 보안 모범 사례

계정의 보안을 강화하기 위해 다음 사항을 권장합니다.

1.  **루트 사용자 사용 최소화**: AWS 계정 생성 시 만들어지는 루트(Root) 계정은 최초 IAM 사용자 생성 후에는 가급적 사용하지 않습니다.
2.  **최소 권한의 원칙**: IAM 사용자에게는 업무 수행에 필요한 최소한의 권한만 부여합니다.
3.  **강력한 암호 정책 및 MFA 적용**: 루트 계정과 모든 IAM 사용자에 대해 강력한 암호 정책을 설정하고, **다중 인증(Multi-Factor Authentication, MFA)**을 활성화합니다.
4.  **암호 주기적 교체**: 사용자의 암호 복잡성 요구사항과 의무 교체 주기를 정의하여 보안을 유지합니다.
5.  **액세스 키 비공유**: 프로그래밍 방식의 액세스를 위해 발급되는 액세스 키(Access Key)는 절대로 외부에 공유하거나 노출하지 않습니다.

---

## 2. 루트 사용자 자격 증명이 필요한 작업

대부분의 작업은 IAM 사용자로 수행할 수 있지만, 다음과 같은 특정 작업은 반드시 루트 사용자 계정으로만 가능합니다.

- 계정 설정 변경 (계정 이름, 이메일 주소, 루트 암호 및 액세스 키)
- 실수로 권한이 취소된 IAM 사용자의 권한 복원
- AWS Billing and Cost Management 콘솔에 대한 IAM 액세스 활성화
- 특정 세금 계산서 조회
- AWS 계정 해지(탈퇴)
- AWS Support Plan 변경 또는 취소
- 예약 인스턴스(Reserved Instance) 마켓플레이스에 판매자로 등록
- MFA Delete 기능이 활성화된 S3 버킷 구성
- 잘못된 VPC ID가 포함된 S3 버킷 정책 편집 또는 삭제
- GovCloud 등록

---

## 3. IAM 핵심 구성 요소

### 3.1. 정책 (Policy)

**정책**은 AWS 리소스에 대한 액세스 권한(Permission)을 정의한 JSON 문서입니다. 정책을 사용자, 그룹, 역할에 연결(Attach)하여 권한을 부여합니다.

- **권장 사항**: 정책은 개별 사용자에게 직접 부여하기보다, **그룹**에 부여하고 사용자를 해당 그룹에 소속시키는 방식을 권장합니다.

#### IAM 정책 종류

| 종류 | 설명 | 관리 주체 |
| :--- | :--- | :--- |
| **AWS 관리형 정책** | AWS가 생성하고 관리하는 사전 정의된 정책 (예: `AdministratorAccess`, `AmazonS3ReadOnlyAccess`) | AWS |
| **고객 관리형 정책** | 사용자가 직접 생성하고 관리하는 재사용 가능한 맞춤형 정책 | 사용자 |
| **인라인 정책** | 특정 사용자, 그룹, 역할에 직접 연결되는 일회성 정책. 재사용이 불가능함 | 사용자 |

> **참고**: 대부분의 경우 AWS 관리형 정책 또는 고객 관리형 정책을 사용하는 것이 좋습니다.

#### 정책 문서 구조

정책은 JSON(JavaScript Object Notation) 형식으로 작성되며, 명시적으로 허용(`Allow`)되지 않은 모든 요청은 기본적으로 거부(`Deny`)됩니다.

| 요소 | 설명 | 필수 여부 |
| :--- | :--- | :--- |
| `Version` | 정책 언어 버전 (보통 "2012-10-17") | 필수 |
| `Statement` | 정책의 핵심 요소로, 하나 이상의 권한 설명을 포함하는 컨테이너 | 필수 |
| ┝ `Sid` | Statement ID, 설명을 위한 식별자 | 선택 |
| ┝ `Effect` | 해당 Statement의 효과. `Allow`(허용) 또는 `Deny`(거부) | 필수 |
| ┝ `Action` | 허용하거나 거부할 작업(API 호출)의 목록 | 필수 |
| ┝ `Resource` | 정책이 적용되는 대상 AWS 리소스의 ARN(Amazon Resource Name) | 필수 |
| ┝ `Condition` | 정책이 적용되기 위한 조건 (예: 특정 IP 주소에서의 요청만 허용) | 선택 |

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "AllowS3ListAndRead",
            "Effect": "Allow",
            "Action": [
                "s3:ListBucket",
                "s3:GetObject"
            ],
            "Resource": [
                "arn:aws:s3:::example-bucket",
                "arn:aws:s3:::example-bucket/*"
            ]
        }
    ]
}
